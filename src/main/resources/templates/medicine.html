<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<title>药品页面</title>
<link rel="stylesheet" href="/layui/css/layui.css" media="all">
</head>
<script type="text/javascript" th:src="@{layui/layui.js}"></script>
<script type="text/javascript">
	function deleteMedicine() {
	    var checkBoxs = document.getElementsByName('case')
	    var ids = []
	   
	    checkBoxs.forEach(b=>{
	    	
	        if (b.checked === true) {
	        		 ids.push(b.value)
	        }
	    })
	    if(ids.length==0){
	    	alert("请选择药品")
	    }
	    $.ajax({
	    		url:"@{/medicine/deleteMedicine }",
	    		contentType:"text/plain",
	    		type:"post",
	    		data:ids.join(","),
				success:function(data){
	    			location.reload()
					}}) 
	    console.log(ids)
	}
</script>

<body>

	<table class="layui-table">
		<colgroup>
			<col width="150">
			<col width="200">
			<col>
		</colgroup>
		<thead>
			<tr>
				<th id="delbtn" onclick="deleteMedicine()">
				<input id="delbtn" type="button" onclick="deleteMedicine() " value="删除"/>
				</th>
				<th>药品编号</th>
				<th>药品名称</th>
				<th>药品价格</th>
				<th>计数单位</th>
				<th>药品规格</th>
				<th>生产厂家</th>
				<th>操作</th>

			</tr>
		</thead>
		<tbody>
			<tr th:each="medicine:${allMedicine}">
			<td><input type="checkbox" name="case"
						value="${{medicine.mid }" /></td>
				<td th:text="${medicine.mid}"></td>
				<td th:text="${medicine.mname}"></td>
				<td th:text="${medicine.mprice}"></td>
				<td th:text="${medicine.munit}"></td>
				<td th:text="${medicine.msize}"></td>
				<td th:text="${medicine.manufacturer}"></td>
				<td><a th:href="@{/medicine/selectAllMedicine}">编辑</a> <!-- 给当前超链接加一属性 属性就是请求的地址 -->
			</tr>

		</tbody>
	</table>



</body>
</html>